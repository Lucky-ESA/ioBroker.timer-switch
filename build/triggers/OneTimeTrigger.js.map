{
  "version": 3,
  "sources": ["../../src/triggers/OneTimeTrigger.ts"],
  "sourcesContent": ["import { Action } from \"../actions/Action\";\nimport { Destroyable } from \"../Destroyable\";\nimport { Trigger } from \"./Trigger\";\n\nexport class OneTimeTrigger implements Trigger, Destroyable {\n    private readonly id: string;\n    private action: Action;\n    private readonly date: Date;\n    private readonly onDestroy: (() => void) | null;\n\n    constructor(id: string, action: Action, date: Date, onDestroy: (() => void) | null) {\n        if (id == null) {\n            throw new Error(\"Id may not be null or undefined.\");\n        }\n        if (action == null) {\n            throw new Error(\"Action may not be null or undefined.\");\n        }\n        if (date == null) {\n            throw new Error(\"Date may not be null or undefined.\");\n        }\n        this.id = id;\n        this.action = action;\n        this.date = new Date(date);\n        this.onDestroy = onDestroy;\n    }\n\n    public getAction(): Action {\n        return {\n            execute: () => {\n                this.action.execute();\n                this.destroy();\n            },\n        } as Action;\n    }\n\n    public setAction(action: Action): void {\n        if (action == null) {\n            throw new Error(\"Action may not be null or undefined.\");\n        }\n        this.action = action;\n    }\n\n    public getId(): string {\n        return this.id;\n    }\n\n    public getDate(): Date {\n        return new Date(this.date);\n    }\n\n    public toString(): string {\n        return `OneTimeTrigger {id=${this.getId()}, date=${this.getDate().toISOString()}}`;\n    }\n\n    public getInternalAction(): Action {\n        return this.action;\n    }\n\n    public destroy(): void {\n        if (this.onDestroy) {\n            this.onDestroy();\n        }\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAIO,MAAM,eAA+C;AAAA,EACvC;AAAA,EACT;AAAA,EACS;AAAA,EACA;AAAA,EAEjB,YAAY,IAAY,QAAgB,MAAY,WAAgC;AAChF,QAAI,MAAM,MAAM;AACZ,YAAM,IAAI,MAAM,kCAAkC;AAAA,IACtD;AACA,QAAI,UAAU,MAAM;AAChB,YAAM,IAAI,MAAM,sCAAsC;AAAA,IAC1D;AACA,QAAI,QAAQ,MAAM;AACd,YAAM,IAAI,MAAM,oCAAoC;AAAA,IACxD;AACA,SAAK,KAAK;AACV,SAAK,SAAS;AACd,SAAK,OAAO,IAAI,KAAK,IAAI;AACzB,SAAK,YAAY;AAAA,EACrB;AAAA,EAEO,YAAoB;AACvB,WAAO;AAAA,MACH,SAAS,MAAM;AACX,aAAK,OAAO,QAAQ;AACpB,aAAK,QAAQ;AAAA,MACjB;AAAA,IACJ;AAAA,EACJ;AAAA,EAEO,UAAU,QAAsB;AACnC,QAAI,UAAU,MAAM;AAChB,YAAM,IAAI,MAAM,sCAAsC;AAAA,IAC1D;AACA,SAAK,SAAS;AAAA,EAClB;AAAA,EAEO,QAAgB;AACnB,WAAO,KAAK;AAAA,EAChB;AAAA,EAEO,UAAgB;AACnB,WAAO,IAAI,KAAK,KAAK,IAAI;AAAA,EAC7B;AAAA,EAEO,WAAmB;AACtB,WAAO,sBAAsB,KAAK,MAAM,CAAC,UAAU,KAAK,QAAQ,EAAE,YAAY,CAAC;AAAA,EACnF;AAAA,EAEO,oBAA4B;AAC/B,WAAO,KAAK;AAAA,EAChB;AAAA,EAEO,UAAgB;AACnB,QAAI,KAAK,WAAW;AAChB,WAAK,UAAU;AAAA,IACnB;AAAA,EACJ;AACJ;",
  "names": []
}
