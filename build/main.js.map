{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["/*\n * Created with @iobroker/create-adapter v2.6.5\n */\n\n// The adapter-core module gives you access to the core ioBroker functions\n// you need to create an adapter\nimport * as utils from \"@iobroker/adapter-core\";\nimport * as fs from \"fs\";\nimport { cancelJob, scheduleJob } from \"node-schedule\";\nimport { getTimes } from \"suncalc\";\nimport { Action } from \"./actions/Action\";\nimport { Condition } from \"./actions/conditions/Condition\";\nimport { Coordinate } from \"./Coordinate\";\nimport { AstroTriggerScheduler } from \"./scheduler/AstroTriggerScheduler\";\nimport { OneTimeTriggerScheduler } from \"./scheduler/OneTimeTriggerScheduler\";\nimport { TimeTriggerScheduler } from \"./scheduler/TimeTriggerScheduler\";\nimport { UniversalTriggerScheduler } from \"./scheduler/UniversalTriggerScheduler\";\nimport { Schedule } from \"./schedules/Schedule\";\nimport { AstroTriggerSerializer } from \"./serialization/AstroTriggerSerializer\";\nimport { ConditionActionSerializer } from \"./serialization/ConditionActionSerializer\";\nimport { StringStateAndConstantConditionSerializer } from \"./serialization/conditions/StringStateAndConstantConditionSerializer\";\nimport { StringStateAndStateConditionSerializer } from \"./serialization/conditions/StringStateAndStateConditionSerializer\";\nimport { OneTimeTriggerSerializer } from \"./serialization/OneTimeTriggerSerializer\";\nimport { OnOffScheduleSerializer } from \"./serialization/OnOffScheduleSerializer\";\nimport { OnOffStateActionSerializer } from \"./serialization/OnOffStateActionSerializer\";\nimport { TimeTriggerSerializer } from \"./serialization/TimeTriggerSerializer\";\nimport { UniversalSerializer } from \"./serialization/UniversalSerializer\";\nimport { IoBrokerLoggingService } from \"./services/IoBrokerLoggingService\";\nimport { IoBrokerStateService } from \"./services/IoBrokerStateService\";\nimport { MessageService } from \"./services/MessageService\";\nimport { Trigger } from \"./triggers/Trigger\";\n\n// Load your modules here, e.g.:\n// import * as fs from \"fs\";\n\nexport class TimerSwitch extends utils.Adapter {\n    private scheduleIdToSchedule: Map<string, Schedule> = new Map<string, Schedule>();\n    private loggingService = new IoBrokerLoggingService(this);\n    private stateService = new IoBrokerStateService(this, this.loggingService);\n    private coordinate: Coordinate | undefined;\n    private messageService: MessageService | undefined;\n    private widgetControl: ioBroker.Interval | undefined | null;\n    public constructor(options: Partial<utils.AdapterOptions> = {}) {\n        super({\n            ...options,\n            name: \"timer-switch\",\n        });\n        this.on(\"ready\", this.onReady.bind(this));\n        this.on(\"stateChange\", this.onStateChange.bind(this));\n        // this.on(\"objectChange\", this.onObjectChange.bind(this));\n        this.on(\"message\", this.onMessage.bind(this));\n        this.on(\"unload\", this.onUnload.bind(this));\n        this.widgetControl = null;\n    }\n\n    public static getEnabledIdFromScheduleId(scheduleId: string): string {\n        return scheduleId.replace(\"data\", \"enabled\");\n    }\n\n    public static getScheduleIdFromEnabledId(scheduleId: string): string {\n        return scheduleId.replace(\"enabled\", \"data\");\n    }\n\n    /**\n     * Is called when databases are connected and adapter received configuration.\n     */\n    private async onReady(): Promise<void> {\n        await this.initMessageService();\n        await this.fixViewStructure();\n        await this.fixStateStructure(this.config.schedules);\n        const record = await this.getStatesAsync(`timer-switch.${this.instance}.*.data`);\n        for (const id in record) {\n            const state = record[id];\n            this.log.debug(`got state: ${state ? JSON.stringify(state) : \"null\"} with id: ${id}`);\n            if (state) {\n                this.log.info(\"ID: \" + id);\n                this.onScheduleChange(id, state.val as string);\n            } else {\n                this.log.error(`Could not retrieve state for ${id}`);\n            }\n        }\n        //this.subscribeStates(`timer-switch.${this.instance}.*`);\n        this.subscribeStates(`*`);\n        this.widgetControl = this.setInterval(\n            () => {\n                this.fixViewStructure();\n            },\n            24 * 60 * 1000 * 60,\n        );\n    }\n\n    /**\n     * Is called when adapter shuts down - callback has to be called under any circumstances!\n     */\n    private onUnload(callback: () => void): void {\n        this.log.info(\"cleaning everything up...\");\n        this.widgetControl && this.clearInterval(this.widgetControl);\n        for (const id in this.scheduleIdToSchedule.keys()) {\n            try {\n                this.scheduleIdToSchedule.get(id)?.destroy();\n            } catch (e) {\n                this.logError(e as Error);\n            }\n        }\n        try {\n            this.scheduleIdToSchedule.clear();\n        } catch (e) {\n            this.logError(e as Error);\n        } finally {\n            callback();\n        }\n    }\n\n    // If you need to react to object changes, uncomment the following block and the corresponding line in the constructor.\n    // You also need to subscribe to the objects with `this.subscribeObjects`, similar to `this.subscribeStates`.\n    // /**\n    //  * Is called if a subscribed object changes\n    //  */\n    // private onObjectChange(id: string, obj: ioBroker.Object | null | undefined): void {\n    //     if (obj) {\n    //         // The object was changed\n    //         this.log.info(`object ${id} changed: ${JSON.stringify(obj)}`);\n    //     } else {\n    //         // The object was deleted\n    //         this.log.info(`object ${id} deleted`);\n    //     }\n    // }\n\n    /**\n     * Is called if a subscribed state changes\n     */\n    private async onStateChange(id: string, state: ioBroker.State | null | undefined): Promise<void> {\n        if (state) {\n            if (!state.ack) {\n                const command = id.split(\".\").pop();\n                if (command === \"data\") {\n                    this.log.debug(\"is schedule id start\");\n                    await this.onScheduleChange(id, state.val as string);\n                    this.log.debug(\"is schedule id end\");\n                } else if (command === \"enabled\") {\n                    this.log.debug(\"is enabled id start\");\n                    const dataId = TimerSwitch.getScheduleIdFromEnabledId(id);\n                    const scheduleData = (await this.getStateAsync(dataId))?.val;\n                    await this.onScheduleChange(dataId, scheduleData as string);\n                    this.log.debug(\"is enabled id end\");\n                } else if (command === \"sendto\" && typeof state.val === \"string\") {\n                    this.log.debug(\"is sendto id\");\n                    this.setSendTo(state.val);\n                }\n                this.stateService.setState(id, state.val as string, true);\n            }\n        }\n    }\n\n    // If you need to accept messages in your adapter, uncomment the following block and the corresponding line in the constructor.\n    /**\n     * Some message was sent to this instance over message box. Used by email, pushover, text2speech, ...\n     * Using this method requires \"common.messagebox\" property to be set to true in io-package.json\n     */\n    private async onMessage(obj: ioBroker.Message): Promise<void> {\n        if (typeof obj === \"object\" && obj.message) {\n            try {\n                this.log.debug(\"obj: \" + JSON.stringify(obj));\n                if (this.messageService) {\n                    await this.messageService.handleMessage(obj);\n                } else {\n                    this.log.error(\"Message service not initialized\");\n                }\n            } catch (e) {\n                this.logError(e as Error);\n                this.log.error(`Could not handle message:`);\n            }\n        }\n    }\n\n    //------------------------------------------------------------------------------------------------------------------\n    // Private helper methods\n    //------------------------------------------------------------------------------------------------------------------\n\n    private async initMessageService(): Promise<void> {\n        this.messageService = new MessageService(\n            this.stateService,\n            this.loggingService,\n            this.scheduleIdToSchedule,\n            this.createNewOnOffScheduleSerializer.bind(this),\n            this,\n        );\n    }\n\n    private async fixViewStructure(): Promise<void> {\n        this.log.info(\"Start Widget control!\");\n        const visFolder = [];\n        const allVisViews: any = {};\n        const newViews: any = {};\n        const allVIS = await this.getObjectViewAsync(\"system\", \"instance\", {\n            startkey: \"system.adapter.vis.\",\n            endkey: \"system.adapter.vis.\\u9999\",\n        });\n        const allVIS2 = await this.getObjectViewAsync(\"system\", \"instance\", {\n            startkey: \"system.adapter.vis-2.\",\n            endkey: \"system.adapter.vis-2.\\u9999\",\n        });\n        if (allVIS2 && allVIS2.rows) {\n            for (const id of allVIS2.rows) {\n                visFolder.push(id.id.replace(\"system.adapter.\", \"\"));\n            }\n        }\n        if (allVIS && allVIS.rows) {\n            for (const id of allVIS.rows) {\n                visFolder.push(id.id.replace(\"system.adapter.\", \"\"));\n            }\n        }\n        if (visFolder.length > 0) {\n            const path = `${utils.getAbsoluteDefaultDataDir()}files/`;\n            for (const vis of visFolder) {\n                allVisViews[vis] = {};\n                const folders = fs.readdirSync(`${path}${vis}/`);\n                for (const folder of folders) {\n                    if (fs.statSync(`${path}${vis}/${folder}`).isDirectory()) {\n                        if (fs.existsSync(`${path}${vis}/${folder}/vis-views.json`)) {\n                            const valViews = fs.readFileSync(`${path}${vis}/${folder}/vis-views.json`, \"utf-8\");\n                            if (valViews.indexOf(\"tplTimer-switchDevicePlan\") !== -1) {\n                                const templates = JSON.parse(valViews);\n                                allVisViews[vis][folder] = {};\n                                for (const template in templates) {\n                                    if (\n                                        templates[template].widgets &&\n                                        JSON.stringify(templates[template].widgets).indexOf(\n                                            \"tplTimer-switchDevicePlan\",\n                                        ) !== -1\n                                    ) {\n                                        allVisViews[vis][folder][template] = [];\n                                        for (const widget in templates[template].widgets) {\n                                            if (\n                                                templates[template].widgets[widget].tpl === \"tplTimer-switchDevicePlan\"\n                                            ) {\n                                                if (\n                                                    templates[template].widgets[widget].data[\"oid-dataId\"] != \"\" &&\n                                                    !newViews[templates[template].widgets[widget].data[\"oid-dataId\"]]\n                                                ) {\n                                                    newViews[templates[template].widgets[widget].data[\"oid-dataId\"]] =\n                                                        {};\n                                                    newViews[templates[template].widgets[widget].data[\"oid-dataId\"]][\n                                                        vis\n                                                    ] = {};\n                                                    newViews[templates[template].widgets[widget].data[\"oid-dataId\"]][\n                                                        vis\n                                                    ][folder] = {};\n                                                    newViews[templates[template].widgets[widget].data[\"oid-dataId\"]][\n                                                        vis\n                                                    ][folder][widget] = {\n                                                        prefix: folder,\n                                                        namespace: vis,\n                                                        view: template,\n                                                        widgetId: widget,\n                                                        newId: templates[template].widgets[widget].data[\"oid-dataId\"],\n                                                    };\n                                                } else if (\n                                                    templates[template].widgets[widget].data[\"oid-dataId\"] != \"\"\n                                                ) {\n                                                    if (\n                                                        !newViews[\n                                                            templates[template].widgets[widget].data[\"oid-dataId\"]\n                                                        ][vis]\n                                                    )\n                                                        newViews[\n                                                            templates[template].widgets[widget].data[\"oid-dataId\"]\n                                                        ][vis] = {};\n                                                    if (\n                                                        !newViews[\n                                                            templates[template].widgets[widget].data[\"oid-dataId\"]\n                                                        ][vis][folder]\n                                                    )\n                                                        newViews[\n                                                            templates[template].widgets[widget].data[\"oid-dataId\"]\n                                                        ][vis][folder] = {};\n                                                    newViews[templates[template].widgets[widget].data[\"oid-dataId\"]][\n                                                        vis\n                                                    ][folder][widget] = {\n                                                        prefix: folder,\n                                                        namespace: vis,\n                                                        view: template,\n                                                        widgetId: widget,\n                                                        newId: templates[template].widgets[widget].data[\"oid-dataId\"],\n                                                    };\n                                                }\n                                                if (\n                                                    !templates[template].widgets[widget].data[\"oid-dataId\"] ||\n                                                    templates[template].widgets[widget].data[\"oid-dataId\"] == \"\"\n                                                ) {\n                                                    this.log.warn(\n                                                        `Missing dataId for ${widget} - ${template} - ${folder} - ${vis}`,\n                                                    );\n                                                }\n                                                if (\n                                                    !templates[template].widgets[widget].data[\"oid-stateId1\"] ||\n                                                    templates[template].widgets[widget].data[\"oid-stateId1\"] == \"\"\n                                                ) {\n                                                    this.log.warn(\n                                                        `Missing stateId for ${widget} - ${template} - ${folder} - ${vis}`,\n                                                    );\n                                                }\n                                                if (\n                                                    !templates[template].widgets[widget].data[\"oid-enabled\"] ||\n                                                    templates[template].widgets[widget].data[\"oid-enabled\"] == \"\"\n                                                ) {\n                                                    this.log.warn(\n                                                        `Missing oid-enabledId for ${widget} - ${template} - ${folder} - ${vis}`,\n                                                    );\n                                                }\n                                                if (\n                                                    templates[template].widgets[widget].data[\"oid-dataId\"] != \"\" &&\n                                                    templates[template].widgets[widget].data[\"oid-enabled\"] != \"\"\n                                                ) {\n                                                    const splitDataId =\n                                                        templates[template].widgets[widget].data[\"oid-dataId\"].split(\n                                                            \".\",\n                                                        );\n                                                    const splitEnabledId =\n                                                        templates[template].widgets[widget].data[\"oid-enabled\"].split(\n                                                            \".\",\n                                                        );\n                                                    if (splitDataId.length != 5 || splitDataId[4] != \"data\") {\n                                                        this.log.warn(\n                                                            `Wrong dataId ${templates[template].widgets[widget].data[\"oid-dataId\"]} for ${widget} - ${template} - ${folder} - ${vis}`,\n                                                        );\n                                                    }\n                                                    if (splitEnabledId.length != 5 || splitEnabledId[4] != \"enabled\") {\n                                                        this.log.warn(\n                                                            `Wrong dataId ${templates[template].widgets[widget].data[\"oid-enabled\"]} for ${widget} - ${template} - ${folder} - ${vis}`,\n                                                        );\n                                                    }\n                                                    if (splitEnabledId[3] != splitDataId[3]) {\n                                                        this.log.warn(\n                                                            `Wrong dataId and enabledID ${templates[template].widgets[widget].data[\"oid-dataId\"]} - ${templates[template].widgets[widget].data[\"oid-enabled\"]} for ${widget} - ${template} - ${folder} - ${vis}`,\n                                                        );\n                                                    }\n                                                }\n                                                const wid: any = {};\n                                                wid[widget] = templates[template].widgets[widget];\n                                                allVisViews[vis][folder][template].push(wid);\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        this.log.debug(\"newViews: \" + JSON.stringify(newViews));\n        if (Object.keys(newViews).length > 0) {\n            for (const stateId in newViews) {\n                const id = stateId.replace(\"data\", \"views\");\n                await this.setState(id, { val: JSON.stringify(newViews[stateId]), ack: true });\n            }\n        }\n    }\n\n    private async fixStateStructure(statesInSettings: { onOff: number[] }): Promise<void> {\n        if (!statesInSettings) {\n            statesInSettings = { onOff: [] };\n        }\n        if (!statesInSettings.onOff) {\n            statesInSettings.onOff = [];\n        }\n        const prefix = `timer-switch.${this.instance}.`;\n        const currentStates = await this.getStatesAsync(`${prefix}*.data`);\n        for (const fullId in currentStates) {\n            const split = fullId.split(\".\");\n            const type = split[2];\n            const id = Number.parseInt(split[3], 10);\n            if (type == \"onoff\") {\n                if (statesInSettings.onOff.includes(id)) {\n                    statesInSettings.onOff = statesInSettings.onOff.filter((i) => i !== id);\n                    this.log.debug(\"Found state \" + fullId);\n                    this.tempCreateView(id);\n                } else {\n                    this.log.debug(\"Deleting state \" + fullId);\n                    await this.deleteOnOffSchedule(id);\n                }\n            }\n        }\n        for (const i of statesInSettings.onOff) {\n            this.log.debug(\"Onoff state \" + i + \" not found, creating\");\n            await this.createOnOffSchedule(i);\n        }\n    }\n\n    private async deleteOnOffSchedule(id: number): Promise<void> {\n        await this.delObjectAsync(`onoff.${id.toString()}`, { recursive: true });\n    }\n\n    private async tempCreateView(id: number): Promise<void> {\n        await this.setObjectNotExistsAsync(`onoff.${id.toString()}.views`, {\n            type: \"state\",\n            common: {\n                name: \"data\",\n                read: true,\n                write: false,\n                type: \"string\",\n                role: \"json\",\n                def: `{}`,\n                desc: \"Contains all widgets\",\n            },\n            native: {},\n        });\n        await this.setState(`onoff.${id.toString()}.views`, { val: JSON.stringify({}), ack: true });\n    }\n\n    private async createOnOffSchedule(id: number): Promise<void> {\n        await this.setObjectNotExistsAsync(\"onoff\", {\n            type: \"device\",\n            common: {\n                name: \"onoff\",\n                desc: \"Created by Adapter\",\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync(`onoff.${id.toString()}`, {\n            type: \"channel\",\n            common: {\n                name: id.toString(),\n                desc: \"Created by Adapter\",\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync(`onoff.${id.toString()}.data`, {\n            type: \"state\",\n            common: {\n                name: \"data\",\n                read: true,\n                write: true,\n                type: \"string\",\n                role: \"json\",\n                def: `{\n                    \"type\": \"OnOffSchedule\",\n                    \"name\": \"New Schedule\",\n                    \"onAction\": {\n                        \"type\":\"OnOffStateAction\",\n                        \"valueType\":\"boolean\",\n                        \"onValue\":true,\n                        \"offValue\":false,\n                        \"booleanValue\":true,\n                        \"idsOfStatesToSet\":[\"default.state\"]\n                        },\n                    \"offAction\": {\n                        \"type\":\"OnOffStateAction\",\n                        \"valueType\":\"boolean\",\n                        \"onValue\":true,\n                        \"offValue\":false,\n                        \"booleanValue\":false,\n                        \"idsOfStatesToSet\":[\"default.state\"]\n                    },\n                    \"triggers\":[]\n                }`.replace(/\\s/g, \"\"),\n                desc: \"Contains the schedule data (triggers, etc.)\",\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync(`onoff.${id.toString()}.views`, {\n            type: \"state\",\n            common: {\n                name: \"data\",\n                read: true,\n                write: false,\n                type: \"string\",\n                role: \"json\",\n                def: `{}`,\n                desc: \"Contains all widgets\",\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync(`onoff.${id.toString()}.views`, {\n            type: \"state\",\n            common: {\n                name: \"data\",\n                read: true,\n                write: false,\n                type: \"string\",\n                role: \"json\",\n                def: `{}`,\n                desc: \"Contains all widgets\",\n            },\n            native: {},\n        });\n        await this.setObjectNotExistsAsync(`onoff.${id.toString()}.enabled`, {\n            type: \"state\",\n            common: {\n                name: \"enabled\",\n                read: true,\n                write: true,\n                type: \"boolean\",\n                role: \"switch\",\n                def: false,\n                desc: \"Enables/disables automatic switching for this schedule\",\n            },\n            native: {},\n        });\n    }\n\n    private async onScheduleChange(id: string, scheduleString: string): Promise<void> {\n        this.log.debug(\"onScheduleChange: \" + scheduleString + \" \" + id);\n        if (this.scheduleIdToSchedule.get(id)) {\n            this.log.debug(\"schedule found: \" + this.scheduleIdToSchedule.get(id));\n        }\n\n        try {\n            const schedule = (await this.createNewOnOffScheduleSerializer(id)).deserialize(scheduleString);\n            const enabledState = await this.getStateAsync(TimerSwitch.getEnabledIdFromScheduleId(id));\n            if (enabledState) {\n                this.scheduleIdToSchedule.get(id)?.destroy();\n                schedule.setEnabled(enabledState.val as boolean);\n                this.scheduleIdToSchedule.set(id, schedule);\n            } else {\n                this.log.error(`Could not retrieve state enabled state for ${id}`);\n            }\n        } catch (e) {\n            this.logError(e as Error);\n        }\n    }\n\n    private async getCoordinate(): Promise<Coordinate> {\n        if (this.coordinate) {\n            return Promise.resolve(this.coordinate);\n        } else {\n            return new Promise((resolve, _) => {\n                this.getForeignObject(\"system.config\", (error, obj) => {\n                    if (obj && obj.common) {\n                        const lat = (obj.common as any).latitude;\n                        const long = (obj.common as any).longitude;\n                        if (lat && long) {\n                            this.log.debug(`Got coordinates lat=${lat} long=${long}`);\n                            resolve(new Coordinate(lat, long));\n                            return;\n                        }\n                    }\n                    this.log.error(\n                        \"Could not read coordinates from system.config, using Berlins coordinates as fallback\",\n                    );\n                    resolve(new Coordinate(52, 13));\n                });\n            });\n        }\n    }\n\n    private logError(error: Error): void {\n        this.log.error(error.stack || `${error.name}: ${error.message}`);\n    }\n\n    private async createNewOnOffScheduleSerializer(dataId: string): Promise<OnOffScheduleSerializer> {\n        const actionSerializer = new UniversalSerializer<Action>([new OnOffStateActionSerializer(this.stateService)]);\n        actionSerializer.useSerializer(\n            new ConditionActionSerializer(\n                new UniversalSerializer<Condition>([\n                    new StringStateAndConstantConditionSerializer(this.stateService),\n                    new StringStateAndStateConditionSerializer(this.stateService),\n                ]),\n                actionSerializer,\n                this.loggingService,\n            ),\n        );\n        const triggerSerializer = new UniversalSerializer<Trigger>([\n            new TimeTriggerSerializer(actionSerializer),\n            new AstroTriggerSerializer(actionSerializer),\n            new OneTimeTriggerSerializer(actionSerializer, (triggerId: string) => {\n                this.messageService?.handleMessage({\n                    message: {\n                        dataId: dataId,\n                        triggerId: triggerId,\n                    },\n                    command: \"delete-trigger\",\n                    from: \"timer-switch.0\",\n                } as any as ioBroker.Message);\n            }),\n        ]);\n        return new OnOffScheduleSerializer(\n            new UniversalTriggerScheduler([\n                new TimeTriggerScheduler(scheduleJob, cancelJob, this.loggingService),\n                new AstroTriggerScheduler(\n                    new TimeTriggerScheduler(scheduleJob, cancelJob, this.loggingService),\n                    getTimes,\n                    await this.getCoordinate(),\n                    this.loggingService,\n                ),\n                new OneTimeTriggerScheduler(scheduleJob, cancelJob, this.loggingService, this),\n            ]),\n            actionSerializer,\n            triggerSerializer,\n        );\n    }\n\n    /**\n     * Is called when vis-2 receives a message.\n     */\n    private async setSendTo(data: string): Promise<void> {\n        const send = JSON.parse(data);\n        this.log.debug(JSON.stringify(send));\n        try {\n            if (this.messageService) {\n                await this.messageService.handleMessage(send);\n            } else {\n                this.log.error(\"Message service not initialized\");\n            }\n        } catch (e) {\n            this.logError(e as Error);\n            this.log.error(`Could not handle message:`);\n        }\n    }\n}\n\nif (require.main !== module) {\n    // Export the constructor in compact mode\n    module.exports = (options: Partial<utils.AdapterOptions> | undefined) => new TimerSwitch(options);\n} else {\n    // otherwise start the instance directly\n    (() => new TimerSwitch())();\n}\n"],
  "mappings": "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",
  "names": []
}
